<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PILL REMINDER APP</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .screen-container {
            display: none;
        }
        .screen-container.active {
            display: flex;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <!-- Glavni spremnik za sve ekrane -->
    <div id="app-container" class="bg-white rounded-3xl shadow-xl w-full max-w-md mx-auto p-6 md:p-8 relative">

        <!-- Ekran za prijavu (Login Screen) -->
        <div id="login-screen" class="screen-container active flex-col items-center justify-center min-h-[500px]">
            <div class="w-full text-center">
                <h1 class="text-3xl font-bold mb-8 text-purple-600">PILL REMINDER APP</h1>
                <div class="space-y-4 mb-6">
                    <input type="text" id="username" placeholder="Korisničko ime" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <input type="password" id="password" placeholder="Lozinka" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <button id="login-btn" class="w-full bg-purple-600 text-white p-3 rounded-lg font-semibold hover:bg-purple-700 transition duration-300 mb-2">Prijava</button>
                <button id="guest-btn" class="w-full bg-gray-200 text-gray-800 p-3 rounded-lg font-semibold hover:bg-gray-300 transition duration-300">Nastavi kao gost</button>
            </div>
        </div>

        <!-- Glavni ekran (Dashboard Screen) -->
        <div id="dashboard-screen" class="screen-container flex-col min-h-[500px]">
            <header class="w-full flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Moji Lijekovi</h2>
                <button id="add-medication-btn" class="bg-purple-600 text-white w-12 h-12 rounded-full text-3xl font-light leading-none hover:bg-purple-700 transition duration-300 shadow-lg">+</button>
            </header>
            <div id="medication-list" class="w-full space-y-4 overflow-y-auto">
                <!-- Ovdje će biti kartice lijekova -->
            </div>
            <!-- Gumb za povratak (samo za prikaz) -->
            <button id="logout-btn" class="absolute top-4 left-4 text-purple-600 hover:text-purple-800 transition duration-300">&larr; Odjava</button>
        </div>

        <!-- Ekran za dodavanje lijeka (Add Medication Screen) -->
        <div id="add-medication-screen" class="screen-container flex-col min-h-[500px]">
            <header class="w-full flex items-center justify-between mb-6">
                <button id="back-to-dashboard-btn" class="text-purple-600 hover:text-purple-800 transition duration-300">&larr; Natrag</button>
                <h2 class="text-2xl font-bold text-gray-800">Dodaj Lijek</h2>
            </header>
            <form id="add-medication-form" class="w-full space-y-4">
                <div>
                    <label for="medication-name" class="block text-gray-700 font-medium mb-1">Ime lijeka</label>
                    <input type="text" id="medication-name" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div>
                    <label for="medication-type" class="block text-gray-700 font-medium mb-1">Vrsta</label>
                    <select id="medication-type" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white">
                        <option value="tableta">Tableta 💊</option>
                        <option value="sirup">Sirup 🧴</option>
                        <option value="sprej">Sprej 💨</option>
                        <option value="injekcija">Injekcija 💉</option>
                    </select>
                </div>
                <div>
                    <label for="medication-time" class="block text-gray-700 font-medium mb-1">Vrijeme uzimanja</label>
                    <input type="time" id="medication-time" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <button type="submit" class="w-full bg-purple-600 text-white p-3 rounded-lg font-semibold hover:bg-purple-700 transition duration-300">Spremi</button>
            </form>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const loginScreen = document.getElementById('login-screen');
            const dashboardScreen = document.getElementById('dashboard-screen');
            const addMedicationScreen = document.getElementById('add-medication-screen');

            const loginBtn = document.getElementById('login-btn');
            const guestBtn = document.getElementById('guest-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const addMedicationBtn = document.getElementById('add-medication-btn');
            const backToDashboardBtn = document.getElementById('back-to-dashboard-btn');
            const addMedicationForm = document.getElementById('add-medication-form');
            const medicationListContainer = document.getElementById('medication-list');

            let medications = JSON.parse(localStorage.getItem('medications')) || [];

            // Prikazuje određeni ekran
            const showScreen = (screen) => {
                loginScreen.classList.remove('active');
                dashboardScreen.classList.remove('active');
                addMedicationScreen.classList.remove('active');
                screen.classList.add('active');
            };

            // Funkcija za renderiranje liste lijekova
            const renderMedicationList = () => {
                medicationListContainer.innerHTML = '';
                if (medications.length === 0) {
                    medicationListContainer.innerHTML = '<p class="text-center text-gray-500 mt-10">Nema dodanih lijekova. Dodajte prvi podsjetnik!</p>';
                }

                medications.forEach((med, index) => {
                    const iconMap = {
                        tableta: '💊',
                        sirup: '🧴',
                        sprej: '💨',
                        injekcija: '💉'
                    };
                    const typeIcon = iconMap[med.type] || '';
                    const isTakenClass = med.isTaken ? 'line-through text-gray-400' : 'text-gray-800';
                    const buttonText = med.isTaken ? 'Poništi' : 'Uzeto';
                    
                    const cardHtml = `
                        <div class="bg-gray-50 p-4 rounded-lg shadow-sm flex items-center justify-between transition-colors duration-200 ${isTakenClass}">
                            <div class="flex items-center space-x-4">
                                <span class="text-3xl">${typeIcon}</span>
                                <div>
                                    <h3 class="text-lg font-semibold">${med.name}</h3>
                                    <p class="text-sm text-gray-500">${med.time}</p>
                                </div>
                            </div>
                            <button data-index="${index}" class="take-btn bg-purple-100 text-purple-600 text-sm py-1 px-3 rounded-full hover:bg-purple-200 transition duration-300">${buttonText}</button>
                        </div>
                    `;
                    medicationListContainer.innerHTML += cardHtml;
                });
            };

            // Slušanje klikova na tipke unutar kartica
            medicationListContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('take-btn')) {
                    const index = e.target.getAttribute('data-index');
                    medications[index].isTaken = !medications[index].isTaken;
                    localStorage.setItem('medications', JSON.stringify(medications));
                    renderMedicationList();
                }
            });

            // Logika za navigaciju i forme
            loginBtn.addEventListener('click', () => {
                // U stvarnoj aplikaciji ovdje bi bila autentikacija.
                // Ovdje se prelazi na dashboard.
                renderMedicationList();
                showScreen(dashboardScreen);
            });

            guestBtn.addEventListener('click', () => {
                renderMedicationList();
                showScreen(dashboardScreen);
            });

            logoutBtn.addEventListener('click', () => {
                showScreen(loginScreen);
            });

            addMedicationBtn.addEventListener('click', () => {
                showScreen(addMedicationScreen);
            });

            backToDashboardBtn.addEventListener('click', () => {
                showScreen(dashboardScreen);
            });

            addMedicationForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('medication-name').value;
                const type = document.getElementById('medication-type').value;
                const time = document.getElementById('medication-time').value;

                if (name && time) {
                    const newMedication = {
                        id: Date.now(),
                        name,
                        type,
                        time,
                        isTaken: false
                    };
                    medications.push(newMedication);
                    localStorage.setItem('medications', JSON.stringify(medications));

                    // Resetiranje forme i prebacivanje na dashboard
                    addMedicationForm.reset();
                    renderMedicationList();
                    showScreen(dashboardScreen);
                } else {
                    alert('Molimo unesite ime lijeka i vrijeme uzimanja.');
                }
            });

            // Početno prikazivanje liste lijekova ako postoje
            if (localStorage.getItem('medications')) {
                renderMedicationList();
            }
        });
    </script>

</body>
</html>
